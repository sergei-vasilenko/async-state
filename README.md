# AsyncState

## Для чего
Применяется для доступа к асинхронным данным. Например есть данные, которые периодически могут обновляться с сервера. Может так случиться, что данные потребуются в момент их обновления и пользователь получит устаревшие данные. Используя данный механизм такого не произодет.

## Использование
1. Инициализируем класс со значением по умолчанию
```
const process = new AsyncState({ id: Date.now() })
```

2. Указываем что идет обновление данных при помощи метода `.wait`
3. Устанавливаем промежуточное значение методом `.set` (может понадобиться если в коде идет обращение к объекту до вызова метода `.wait`, но его значение нельзя установить при инициализации)
4. Сохраняем обновленные данные и сигнализируем что обновление закончено методом `.result`
5. Если необходимо выбрасываем исключение методом `.fail`
```
try {
    process.wait();
    const data = await updataData();
    process.result(data);
} catch (err) {
    process.fail(err);
}

```

6. Получаем данные асинхронно:
```
const getData = async () => {
    try {
      const data = await process;
      return { success: true, data };
    } catch (err) {
      console.error(err)
      return { success: false, data: null };
    }
};
```